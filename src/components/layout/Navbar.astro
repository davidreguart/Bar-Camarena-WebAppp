---
const navButton =
  "px-4 py-2 rounded-xl hover:bg-rojo hover:text-blanco transition-all duration-300 ease-in-out";
---

<nav
  id="main-nav"
  class="fixed top-4 left-1/2 -translate-x-1/2 w-[95%] md:w-[85%] max-w-7xl mx-auto px-6 py-3 flex justify-between items-center rounded-2xl bg-white/10 backdrop-blur-sm border border-white/20 shadow-xl z-[100] transition-all duration-300"
>
  <!-- Logo -->
  <a href="/" id="logo-link" class="group transition-transform duration-300 hover:scale-105" aria-label="Volver al inicio">
    <div class="w-24 md:w-32">
      <img src="/img/logo_camarena.svg" alt="Logo Camarena" class="w-full h-auto" />
    </div>
  </a>

  <!-- Desktop Navigation -->
  <ul id="desktop-nav" class="hidden md:flex items-center gap-2 text-negro font-bold">
    <li><a href="/#about" class={navButton}>Inicio</a></li>
    <li><a href="/#menu" class={navButton}>Menú diario</a></li>
    <li><a href="/carta" class={navButton}>Nuestra Carta</a></li>
    <li><a href="/#timetable" class={navButton}>Horario</a></li>
    <li>
      <a href="/#footer" class="ml-2 px-5 py-2.5 bg-rojo text-white rounded-xl hover:bg-negro transition-all duration-300 shadow-md hover:shadow-lg active:scale-95">
        Contacto
      </a>
    </li>
  </ul>

  <!-- Mobile Hamburger -->
  <button 
    id="hamburger" 
    class="md:hidden flex flex-col justify-center items-center w-10 h-10 gap-1.5 focus:outline-none z-[110]"
    aria-label="Abrir menú"
  >
    <div class="hamburger-line w-6 h-0.5 bg-negro rounded-full transition-all duration-300 origin-center"></div>
    <div class="hamburger-line w-6 h-0.5 bg-negro rounded-full transition-all duration-300"></div>
    <div class="hamburger-line w-6 h-0.5 bg-negro rounded-full transition-all duration-300 origin-center"></div>
  </button>
</nav>

<!-- Mobile Overlay Menu -->
<div
  id="mobile-menu-overlay"
  class="fixed inset-0 bg-negro/20 backdrop-blur-sm z-[105] hidden opacity-0 transition-opacity duration-300 md:hidden"
></div>

<div
  id="mobile-menu"
  class="fixed top-[88px] left-1/2 -translate-x-1/2 w-[90%] bg-salmon/95 backdrop-blur-lg rounded-2xl p-8 flex flex-col items-center gap-6 text-negro font-bold shadow-2xl z-[106] md:hidden invisible opacity-0 scale-95 transition-all duration-300 hidden"
>
  <!-- Close Button (X) -->
  <button 
    id="close-menu" 
    class="absolute top-4 right-4 p-2 text-negro hover:text-rojo transition-colors"
    aria-label="Cerrar menú"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </button>

  <a href="/#about" class="mobile-nav-link text-xl hover:text-rojo transition-colors w-full text-center py-2">Inicio</a>
  <a href="/#menu" class="mobile-nav-link text-xl hover:text-rojo transition-colors w-full text-center py-2">Menú diario</a>
  <a href="/carta" class="mobile-nav-link text-xl hover:text-rojo transition-colors w-full text-center py-2">Nuestra Carta</a>
  <a href="/#timetable" class="mobile-nav-link text-xl hover:text-rojo transition-colors w-full text-center py-2">Horario</a>
  <hr class="w-full border-negro/10" />
  <a href="/#footer" class="w-full bg-rojo text-white py-4 rounded-xl text-center shadow-lg active:scale-95 transition-transform">
    Contacto
  </a>
</div>

<script>
  const hamburger = document.getElementById("hamburger");
  const closeMenu = document.getElementById("close-menu");
  const mobileMenu = document.getElementById("mobile-menu");
  const mobileOverlay = document.getElementById("mobile-menu-overlay");
  const nav = document.getElementById("main-nav");
  const logoLink = document.getElementById("logo-link");
  const lines = document.querySelectorAll(".hamburger-line");
  const mobileLinks = document.querySelectorAll(".mobile-nav-link");

  const toggleMenu = () => {
    const isHidden = mobileMenu.classList.contains("hidden");
    
    if (isHidden) {
      // Abrir
      mobileMenu.classList.remove("hidden");
      mobileOverlay.classList.remove("hidden");
      
      // Pequeño delay para la animación
      setTimeout(() => {
        mobileMenu.classList.add("opacity-100", "scale-100");
        mobileMenu.classList.remove("invisible", "opacity-0", "scale-95");
        mobileOverlay.classList.add("opacity-100");
        mobileOverlay.classList.remove("opacity-0");
        
        // Animación hamburguesa
        lines[0].classList.add("translate-y-[8px]", "rotate-45");
        lines[1].classList.add("opacity-0");
        lines[2].classList.add("-translate-y-[8px]", "-rotate-45");
      }, 10);
      
      document.body.style.overflow = "hidden";
    } else {
      // Cerrar
      mobileMenu.classList.add("opacity-0", "scale-95");
      mobileMenu.classList.remove("opacity-100", "scale-100");
      mobileOverlay.classList.add("opacity-0");
      mobileOverlay.classList.remove("opacity-100");
      
      // Animación hamburguesa
      lines[0].classList.remove("translate-y-[8px]", "rotate-45");
      lines[1].classList.remove("opacity-0");
      lines[2].classList.remove("-translate-y-[8px]", "-rotate-45");
      
      setTimeout(() => {
        mobileMenu.classList.add("hidden", "invisible");
        mobileOverlay.classList.add("hidden");
        document.body.style.overflow = "auto";
      }, 300);
    }
  };

  hamburger.addEventListener("click", toggleMenu);
  closeMenu.addEventListener("click", toggleMenu);
  mobileOverlay.addEventListener("click", toggleMenu);
  
  mobileLinks.forEach(link => {
    link.addEventListener("click", () => {
      if (!mobileMenu.classList.contains("hidden")) toggleMenu();
    });
  });

  logoLink.addEventListener("click", (event) => {
    if (window.location.pathname === "/") {
      event.preventDefault();
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
  });

  // Efecto scroll en desktop
  window.addEventListener("scroll", () => {
    if (window.scrollY > 20) {
      nav.classList.add("py-2", "shadow-2xl", "bg-white/20");
      nav.classList.remove("py-3", "bg-white/10");
    } else {
      nav.classList.add("py-3", "bg-white/10");
      nav.classList.remove("py-2", "shadow-2xl", "bg-white/20");
    }
  });
</script>

<style>
  /* Personalización extra no posible con solo TW */
  #main-nav {
    border: 1px solid rgba(255, 255, 255, 0.3);
  }
</style>
